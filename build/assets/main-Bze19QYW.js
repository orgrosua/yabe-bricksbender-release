var St=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);import{b as $}from"./constant-DMD3CJmW.js";import{l as b}from"./bricks-C5LTkFVH.js";var hn=St((l,d)=>{let Ct=t=>crypto.getRandomValues(new Uint8Array(t)),Et=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,a=-~(1.6*n*e/t.length);return(i=e)=>{let o="";for(;;){let s=r(a),u=a;for(;u--;)if(o+=t[s[u]&n]||"",o.length===i)return o}}},Mt=(t,e=21)=>Et(t,e,Ct);var ut=typeof global=="object"&&global&&global.Object===Object&&global,Nt=typeof self=="object"&&self&&self.Object===Object&&self,m=ut||Nt||Function("return this")(),S=m.Symbol,ct=Object.prototype,It=ct.hasOwnProperty,Lt=ct.toString,O=S?S.toStringTag:void 0;function Dt(t){var e=It.call(t,O),r=t[O];try{t[O]=void 0;var n=!0}catch{}var a=Lt.call(t);return n&&(e?t[O]=r:delete t[O]),a}var Ft=Object.prototype,Ht=Ft.toString;function Rt(t){return Ht.call(t)}var Ut="[object Null]",zt="[object Undefined]",W=S?S.toStringTag:void 0;function E(t){return t==null?t===void 0?zt:Ut:W&&W in Object(t)?Dt(t):Rt(t)}function x(t){return t!=null&&typeof t=="object"}var R=Array.isArray;function _(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ft(t){return t}var Bt="[object AsyncFunction]",Gt="[object Function]",qt="[object GeneratorFunction]",Kt="[object Proxy]";function q(t){if(!_(t))return!1;var e=E(t);return e==Gt||e==qt||e==Bt||e==Kt}var F=m["__core-js_shared__"],Y=function(){var t=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Vt(t){return!!Y&&Y in t}var Xt=Function.prototype,Jt=Xt.toString;function Wt(t){if(t!=null){try{return Jt.call(t)}catch{}try{return t+""}catch{}}return""}var Yt=/[\\^$.*+?()[\]{}|]/g,Zt=/^\[object .+?Constructor\]$/,Qt=Function.prototype,kt=Object.prototype,te=Qt.toString,ee=kt.hasOwnProperty,re=RegExp("^"+te.call(ee).replace(Yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ne(t){if(!_(t)||Vt(t))return!1;var e=q(t)?re:Zt;return e.test(Wt(t))}function ae(t,e){return t?.[e]}function K(t,e){var r=ae(t,e);return ne(r)?r:void 0}var Z=Object.create,ie=function(){function t(){}return function(e){if(!_(e))return{};if(Z)return Z(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function oe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function se(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var ue=800,ce=16,fe=Date.now;function le(t){var e=0,r=0;return function(){var n=fe(),a=ce-(n-r);if(r=n,a>0){if(++e>=ue)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function de(t){return function(){return t}}var C=function(){try{var t=K(Object,"defineProperty");return t({},"",{}),t}catch{}}(),pe=C?function(t,e){return C(t,"toString",{configurable:!0,enumerable:!1,value:de(e),writable:!0})}:ft;const he=pe;var ge=le(he),be=9007199254740991,ve=/^(?:0|[1-9]\d*)$/;function lt(t,e){var r=typeof t;return e=e??be,!!e&&(r=="number"||r!="symbol"&&ve.test(t))&&t>-1&&t%1==0&&t<e}function V(t,e,r){e=="__proto__"&&C?C(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function M(t,e){return t===e||t!==t&&e!==e}var _e=Object.prototype,me=_e.hasOwnProperty;function ye(t,e,r){var n=t[e];(!(me.call(t,e)&&M(n,r))||r===void 0&&!(e in t))&&V(t,e,r)}function Te(t,e,r,n){var a=!r;r||(r={});for(var i=-1,o=e.length;++i<o;){var s=e[i],u=n?n(r[s],t[s],s,r,t):void 0;u===void 0&&(u=t[s]),a?V(r,s,u):ye(r,s,u)}return r}var Q=Math.max;function we(t,e,r){return e=Q(e===void 0?t.length-1:e,0),function(){for(var n=arguments,a=-1,i=Q(n.length-e,0),o=Array(i);++a<i;)o[a]=n[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=n[a];return s[e]=r(o),oe(t,this,s)}}function Oe(t,e){return ge(we(t,e,ft),t+"")}var je=9007199254740991;function dt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=je}function X(t){return t!=null&&dt(t.length)&&!q(t)}function Ae(t,e,r){if(!_(r))return!1;var n=typeof e;return(n=="number"?X(r)&&lt(e,r.length):n=="string"&&e in r)?M(r[e],t):!1}function xe(t){return Oe(function(e,r){var n=-1,a=r.length,i=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(a--,i):void 0,o&&Ae(r[0],r[1],o)&&(i=a<3?void 0:i,a=1),e=Object(e);++n<a;){var s=r[n];s&&t(e,s,n,i)}return e})}var Pe=Object.prototype;function pt(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Pe;return t===r}function $e(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Se="[object Arguments]";function k(t){return x(t)&&E(t)==Se}var ht=Object.prototype,Ce=ht.hasOwnProperty,Ee=ht.propertyIsEnumerable,Me=k(function(){return arguments}())?k:function(t){return x(t)&&Ce.call(t,"callee")&&!Ee.call(t,"callee")};const U=Me;function Ne(){return!1}var gt=typeof l=="object"&&l&&!l.nodeType&&l,tt=gt&&typeof d=="object"&&d&&!d.nodeType&&d,Ie=tt&&tt.exports===gt,et=Ie?m.Buffer:void 0,Le=et?et.isBuffer:void 0,bt=Le||Ne,De="[object Arguments]",Fe="[object Array]",He="[object Boolean]",Re="[object Date]",Ue="[object Error]",ze="[object Function]",Be="[object Map]",Ge="[object Number]",qe="[object Object]",Ke="[object RegExp]",Ve="[object Set]",Xe="[object String]",Je="[object WeakMap]",We="[object ArrayBuffer]",Ye="[object DataView]",Ze="[object Float32Array]",Qe="[object Float64Array]",ke="[object Int8Array]",tr="[object Int16Array]",er="[object Int32Array]",rr="[object Uint8Array]",nr="[object Uint8ClampedArray]",ar="[object Uint16Array]",ir="[object Uint32Array]",c={};c[Ze]=c[Qe]=c[ke]=c[tr]=c[er]=c[rr]=c[nr]=c[ar]=c[ir]=!0;c[De]=c[Fe]=c[We]=c[He]=c[Ye]=c[Re]=c[Ue]=c[ze]=c[Be]=c[Ge]=c[qe]=c[Ke]=c[Ve]=c[Xe]=c[Je]=!1;function or(t){return x(t)&&dt(t.length)&&!!c[E(t)]}function sr(t){return function(e){return t(e)}}var vt=typeof l=="object"&&l&&!l.nodeType&&l,j=vt&&typeof d=="object"&&d&&!d.nodeType&&d,ur=j&&j.exports===vt,H=ur&&ut.process,rt=function(){try{var t=j&&j.require&&j.require("util").types;return t||H&&H.binding&&H.binding("util")}catch{}}(),nt=rt&&rt.isTypedArray,_t=nt?sr(nt):or,cr=Object.prototype,fr=cr.hasOwnProperty;function lr(t,e){var r=R(t),n=!r&&U(t),a=!r&&!n&&bt(t),i=!r&&!n&&!a&&_t(t),o=r||n||a||i,s=o?$e(t.length,String):[],u=s.length;for(var p in t)(e||fr.call(t,p))&&!(o&&(p=="length"||a&&(p=="offset"||p=="parent")||i&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||lt(p,u)))&&s.push(p);return s}function dr(t,e){return function(r){return t(e(r))}}function pr(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var hr=Object.prototype,gr=hr.hasOwnProperty;function br(t){if(!_(t))return pr(t);var e=pt(t),r=[];for(var n in t)n=="constructor"&&(e||!gr.call(t,n))||r.push(n);return r}function mt(t){return X(t)?lr(t,!0):br(t)}var A=K(Object,"create");function vr(){this.__data__=A?A(null):{},this.size=0}function _r(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var mr="__lodash_hash_undefined__",yr=Object.prototype,Tr=yr.hasOwnProperty;function wr(t){var e=this.__data__;if(A){var r=e[t];return r===mr?void 0:r}return Tr.call(e,t)?e[t]:void 0}var Or=Object.prototype,jr=Or.hasOwnProperty;function Ar(t){var e=this.__data__;return A?e[t]!==void 0:jr.call(e,t)}var xr="__lodash_hash_undefined__";function Pr(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=A&&e===void 0?xr:e,this}function v(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}v.prototype.clear=vr;v.prototype.delete=_r;v.prototype.get=wr;v.prototype.has=Ar;v.prototype.set=Pr;function $r(){this.__data__=[],this.size=0}function N(t,e){for(var r=t.length;r--;)if(M(t[r][0],e))return r;return-1}var Sr=Array.prototype,Cr=Sr.splice;function Er(t){var e=this.__data__,r=N(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Cr.call(e,r,1),--this.size,!0}function Mr(t){var e=this.__data__,r=N(e,t);return r<0?void 0:e[r][1]}function Nr(t){return N(this.__data__,t)>-1}function Ir(t,e){var r=this.__data__,n=N(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function g(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}g.prototype.clear=$r;g.prototype.delete=Er;g.prototype.get=Mr;g.prototype.has=Nr;g.prototype.set=Ir;var yt=K(m,"Map");function Lr(){this.size=0,this.__data__={hash:new v,map:new(yt||g),string:new v}}function Dr(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function I(t,e){var r=t.__data__;return Dr(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Fr(t){var e=I(this,t).delete(t);return this.size-=e?1:0,e}function Hr(t){return I(this,t).get(t)}function Rr(t){return I(this,t).has(t)}function Ur(t,e){var r=I(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function y(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}y.prototype.clear=Lr;y.prototype.delete=Fr;y.prototype.get=Hr;y.prototype.has=Rr;y.prototype.set=Ur;var Tt=dr(Object.getPrototypeOf,Object),zr="[object Object]",Br=Function.prototype,Gr=Object.prototype,wt=Br.toString,qr=Gr.hasOwnProperty,Kr=wt.call(Object);function Vr(t){if(!x(t)||E(t)!=zr)return!1;var e=Tt(t);if(e===null)return!0;var r=qr.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&wt.call(r)==Kr}function Xr(){this.__data__=new g,this.size=0}function Jr(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Wr(t){return this.__data__.get(t)}function Yr(t){return this.__data__.has(t)}var Zr=200;function Qr(t,e){var r=this.__data__;if(r instanceof g){var n=r.__data__;if(!yt||n.length<Zr-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new y(n)}return r.set(t,e),this.size=r.size,this}function T(t){var e=this.__data__=new g(t);this.size=e.size}T.prototype.clear=Xr;T.prototype.delete=Jr;T.prototype.get=Wr;T.prototype.has=Yr;T.prototype.set=Qr;var Ot=typeof l=="object"&&l&&!l.nodeType&&l,at=Ot&&typeof d=="object"&&d&&!d.nodeType&&d,kr=at&&at.exports===Ot,it=kr?m.Buffer:void 0,ot=it?it.allocUnsafe:void 0;function tn(t,e){if(e)return t.slice();var r=t.length,n=ot?ot(r):new t.constructor(r);return t.copy(n),n}var st=m.Uint8Array;function en(t){var e=new t.constructor(t.byteLength);return new st(e).set(new st(t)),e}function rn(t,e){var r=e?en(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function nn(t){return typeof t.constructor=="function"&&!pt(t)?ie(Tt(t)):{}}function an(t){return function(e,r,n){for(var a=-1,i=Object(e),o=n(e),s=o.length;s--;){var u=o[t?s:++a];if(r(i[u],u,i)===!1)break}return e}}var on=an();function z(t,e,r){(r!==void 0&&!M(t[e],r)||r===void 0&&!(e in t))&&V(t,e,r)}function sn(t){return x(t)&&X(t)}function B(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function un(t){return Te(t,mt(t))}function cn(t,e,r,n,a,i,o){var s=B(t,r),u=B(e,r),p=o.get(u);if(p){z(t,r,p);return}var f=i?i(s,u,r+"",t,e,o):void 0,w=f===void 0;if(w){var L=R(u),D=!L&&bt(u),J=!L&&!D&&_t(u);f=u,L||D||J?R(s)?f=s:sn(s)?f=se(s):D?(w=!1,f=tn(u,!0)):J?(w=!1,f=rn(u,!0)):f=[]:Vr(u)||U(u)?(f=s,U(s)?f=un(s):(!_(s)||q(s))&&(f=nn(u))):w=!1}w&&(o.set(u,f),a(f,u,n,i,o),o.delete(u)),z(t,r,f)}function jt(t,e,r,n,a){t!==e&&on(e,function(i,o){if(a||(a=new T),_(i))cn(t,e,o,r,jt,n,a);else{var s=n?n(B(t,o),i,o+"",t,e,a):void 0;s===void 0&&(s=i),z(t,o,s)}},mt)}var fn=xe(function(t,e,r){jt(t,e,r)});const h=fn;function G(){return"siul"+Mt("1234567890abcdef",6)()}function ln(t){const e=[];return t.childNodes.forEach(r=>{const n=At(r);n&&e.push(n)}),xt(e,0)}function dn(t){const e=t.tagName.toLowerCase(),r={id:G(),name:"div",settings:{},children:[]},n=[],a=["id","class","href","src"];if(Object.keys(t.attributes).forEach(i=>{const o=t.attributes[i].name;a.includes(o)?(o==="class"&&t.attributes[i].value.trim()!==""&&h(r.settings,{_cssClasses:t.attributes[i].value}),o==="id"&&t.id.trim()!==""&&h(r.settings,{_cssId:t.id}),o==="href"&&t.tagName.toLowerCase()==="a"&&h(r.settings,{link:{url:t.getAttribute("href")}})):n.push({id:G(),name:o,value:t.attributes[i].value})}),h(r.settings,{_attributes:n}),e==="svg")return r.name="svg",h(r.settings,{source:"code",code:t.outerHTML}),r.settings._attributes=[],r;if(e==="img"){let i=t.getAttribute("src");return r.name="image",h(r.settings,{image:{external:!0,url:i||"",full:i||"",filename:i.split("/").pop()||""},altText:t.getAttribute("alt")||""}),r}if(e.match(/h[1-6]/)&&(r.name="heading",h(r.settings,{text:t.innerText,tag:e})),e==="video"||e==="iframe"&&(t.getAttribute("src").includes("youtube.com")||t.getAttribute("src").includes("vimeo.com")))return r.name="video",h(r.settings,{source:"url",url:e==="video"?t.getAttribute("src"):t.getAttribute("src").split("?")[0]}),r;if(e==="a"){if(h(r.settings,{link:{type:"external",url:t.getAttribute("href")||"",newTab:t.getAttribute("target")==="_blank",ariaLabel:t.getAttribute("aria-label")||"",title:t.getAttribute("title")||"",rel:t.getAttribute("rel")||""}}),t.children.length===0)return r.name="text-basic",h(r.settings,{text:t.innerText}),r;r.name="text-link",h(r.settings,{text:t.innerText})}return t.childNodes.forEach(i=>{const o=At(i);o&&r.children.push(o)}),r}function At(t){return t.nodeType===Node.ELEMENT_NODE?dn(t):t.nodeType===Node.TEXT_NODE&&t.nodeValue.trim()!==""?{id:G(),name:"text-basic",settings:{tag:"span",text:t.nodeValue},children:[]}:null}function xt(t,e){const r=[];return t.forEach(n=>{n.parent=e,n._children=n.children.map(a=>a.id),r.push(n),r.push(...xt(n.children,n.id)),n.children=n._children,delete n._children}),r}async function pn(){if(!navigator.permissions)return b("Clipboard permissions not supported",{module:"html2bricks",type:"error"}),!1;let t="";const e=await navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1});if(e.state==="prompt"&&(b("Requesting clipboard-read permission",{module:"html2bricks"}),t=await navigator.clipboard.readText(),e.state!=="granted"))return b("Clipboard-read permission denied",{module:"html2bricks",type:"error"}),!1;t=await navigator.clipboard.readText();const r=await navigator.permissions.query({name:"clipboard-write"});return r.state==="prompt"&&(b("Requesting clipboard-write permission",{module:"html2bricks"}),await navigator.clipboard.writeText(t),r.state!=="granted")?(b("Clipboard-write permission denied",{module:"html2bricks",type:"error"}),!1):!0}async function Pt(){if(!await pn()){$.$_showMessage("[Bricksbender] Clipboard access not available");return}const t=await navigator.clipboard.readText();if(!t||t.charAt(0)!=="<"){b("Pasted content is not HTML",{module:"html2bricks",type:"error"}),$.$_showMessage("[Bricksbender] Pasted content is not HTML");return}const e=new DOMParser().parseFromString(t,"text/html").body,n={content:ln(e),source:"bricksCopiedElements",sourceUrl:window.bricksData.siteUrl,version:window.bricksData.version,globalClasses:[],globalElements:[]};await navigator.clipboard.writeText(JSON.stringify(n,null)),$.$_pasteElements(),$.$_showMessage("[Bricksbender] HTML pasted")}document.addEventListener("keydown",t=>{t.target.id==="bricks-toolbar"||t.target.id==="bricks-panel"||!(t.ctrlKey||t.metaKey)||!t.shiftKey||t.key.toLowerCase()!=="v"||Pt()});const $t=document.querySelector("#bricks-builder-context-menu li:nth-child(2)"),P=document.createElement("li");P.id="bricksbender-html2bricks-context-menu";P.classList.add("sep");P.innerHTML='<span class="label">Paste HTML</span><span class="shortcut">CTRL + SHIFT + V</span>';P.addEventListener("click",Pt);$t.classList.remove("sep");$t.insertAdjacentElement("afterend",P);b("Module loaded!",{module:"html2bricks"})});export default hn();
