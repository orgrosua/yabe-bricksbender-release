var Ct=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);import{b as $}from"./constant-DMD3CJmW.js";import{l as b}from"./bricks-BPl5I4v6.js";var gn=Ct((f,d)=>{let Et=t=>crypto.getRandomValues(new Uint8Array(t)),Mt=(t,e,r)=>{let n=(2<<Math.log(t.length-1)/Math.LN2)-1,a=-~(1.6*n*e/t.length);return(i=e)=>{let o="";for(;;){let s=r(a),u=a;for(;u--;)if(o+=t[s[u]&n]||"",o.length===i)return o}}},Nt=(t,e=21)=>Mt(t,e,Et);var ct=typeof global=="object"&&global&&global.Object===Object&&global,It=typeof self=="object"&&self&&self.Object===Object&&self,y=ct||It||Function("return this")(),S=y.Symbol,lt=Object.prototype,Lt=lt.hasOwnProperty,Dt=lt.toString,O=S?S.toStringTag:void 0;function Ft(t){var e=Lt.call(t,O),r=t[O];try{t[O]=void 0;var n=!0}catch{}var a=Dt.call(t);return n&&(e?t[O]=r:delete t[O]),a}var Ht=Object.prototype,Rt=Ht.toString;function Ut(t){return Rt.call(t)}var zt="[object Null]",Bt="[object Undefined]",W=S?S.toStringTag:void 0;function E(t){return t==null?t===void 0?Bt:zt:W&&W in Object(t)?Ft(t):Ut(t)}function x(t){return t!=null&&typeof t=="object"}var R=Array.isArray;function m(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ft(t){return t}var Gt="[object AsyncFunction]",qt="[object Function]",Kt="[object GeneratorFunction]",Vt="[object Proxy]";function q(t){if(!m(t))return!1;var e=E(t);return e==qt||e==Kt||e==Gt||e==Vt}var F=y["__core-js_shared__"],Y=function(){var t=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Xt(t){return!!Y&&Y in t}var Jt=Function.prototype,Wt=Jt.toString;function Yt(t){if(t!=null){try{return Wt.call(t)}catch{}try{return t+""}catch{}}return""}var Zt=/[\\^$.*+?()[\]{}|]/g,Qt=/^\[object .+?Constructor\]$/,kt=Function.prototype,te=Object.prototype,ee=kt.toString,re=te.hasOwnProperty,ne=RegExp("^"+ee.call(re).replace(Zt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ae(t){if(!m(t)||Xt(t))return!1;var e=q(t)?ne:Qt;return e.test(Yt(t))}function ie(t,e){return t==null?void 0:t[e]}function K(t,e){var r=ie(t,e);return ae(r)?r:void 0}var Z=Object.create,oe=function(){function t(){}return function(e){if(!m(e))return{};if(Z)return Z(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function se(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function ue(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var ce=800,le=16,fe=Date.now;function de(t){var e=0,r=0;return function(){var n=fe(),a=le-(n-r);if(r=n,a>0){if(++e>=ce)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function pe(t){return function(){return t}}var C=function(){try{var t=K(Object,"defineProperty");return t({},"",{}),t}catch{}}(),he=C?function(t,e){return C(t,"toString",{configurable:!0,enumerable:!1,value:pe(e),writable:!0})}:ft;const ge=he;var be=de(ge),ve=9007199254740991,me=/^(?:0|[1-9]\d*)$/;function dt(t,e){var r=typeof t;return e=e??ve,!!e&&(r=="number"||r!="symbol"&&me.test(t))&&t>-1&&t%1==0&&t<e}function V(t,e,r){e=="__proto__"&&C?C(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function M(t,e){return t===e||t!==t&&e!==e}var ye=Object.prototype,_e=ye.hasOwnProperty;function Te(t,e,r){var n=t[e];(!(_e.call(t,e)&&M(n,r))||r===void 0&&!(e in t))&&V(t,e,r)}function we(t,e,r,n){var a=!r;r||(r={});for(var i=-1,o=e.length;++i<o;){var s=e[i],u=n?n(r[s],t[s],s,r,t):void 0;u===void 0&&(u=t[s]),a?V(r,s,u):Te(r,s,u)}return r}var Q=Math.max;function Oe(t,e,r){return e=Q(e===void 0?t.length-1:e,0),function(){for(var n=arguments,a=-1,i=Q(n.length-e,0),o=Array(i);++a<i;)o[a]=n[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=n[a];return s[e]=r(o),se(t,this,s)}}function je(t,e){return be(Oe(t,e,ft),t+"")}var Ae=9007199254740991;function pt(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ae}function X(t){return t!=null&&pt(t.length)&&!q(t)}function xe(t,e,r){if(!m(r))return!1;var n=typeof e;return(n=="number"?X(r)&&dt(e,r.length):n=="string"&&e in r)?M(r[e],t):!1}function Pe(t){return je(function(e,r){var n=-1,a=r.length,i=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(a--,i):void 0,o&&xe(r[0],r[1],o)&&(i=a<3?void 0:i,a=1),e=Object(e);++n<a;){var s=r[n];s&&t(e,s,n,i)}return e})}var $e=Object.prototype;function ht(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||$e;return t===r}function Se(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Ce="[object Arguments]";function k(t){return x(t)&&E(t)==Ce}var gt=Object.prototype,Ee=gt.hasOwnProperty,Me=gt.propertyIsEnumerable,Ne=k(function(){return arguments}())?k:function(t){return x(t)&&Ee.call(t,"callee")&&!Me.call(t,"callee")};const U=Ne;function Ie(){return!1}var bt=typeof f=="object"&&f&&!f.nodeType&&f,tt=bt&&typeof d=="object"&&d&&!d.nodeType&&d,Le=tt&&tt.exports===bt,et=Le?y.Buffer:void 0,De=et?et.isBuffer:void 0,vt=De||Ie,Fe="[object Arguments]",He="[object Array]",Re="[object Boolean]",Ue="[object Date]",ze="[object Error]",Be="[object Function]",Ge="[object Map]",qe="[object Number]",Ke="[object Object]",Ve="[object RegExp]",Xe="[object Set]",Je="[object String]",We="[object WeakMap]",Ye="[object ArrayBuffer]",Ze="[object DataView]",Qe="[object Float32Array]",ke="[object Float64Array]",tr="[object Int8Array]",er="[object Int16Array]",rr="[object Int32Array]",nr="[object Uint8Array]",ar="[object Uint8ClampedArray]",ir="[object Uint16Array]",or="[object Uint32Array]",c={};c[Qe]=c[ke]=c[tr]=c[er]=c[rr]=c[nr]=c[ar]=c[ir]=c[or]=!0;c[Fe]=c[He]=c[Ye]=c[Re]=c[Ze]=c[Ue]=c[ze]=c[Be]=c[Ge]=c[qe]=c[Ke]=c[Ve]=c[Xe]=c[Je]=c[We]=!1;function sr(t){return x(t)&&pt(t.length)&&!!c[E(t)]}function ur(t){return function(e){return t(e)}}var mt=typeof f=="object"&&f&&!f.nodeType&&f,j=mt&&typeof d=="object"&&d&&!d.nodeType&&d,cr=j&&j.exports===mt,H=cr&&ct.process,rt=function(){try{var t=j&&j.require&&j.require("util").types;return t||H&&H.binding&&H.binding("util")}catch{}}(),nt=rt&&rt.isTypedArray,yt=nt?ur(nt):sr,lr=Object.prototype,fr=lr.hasOwnProperty;function dr(t,e){var r=R(t),n=!r&&U(t),a=!r&&!n&&vt(t),i=!r&&!n&&!a&&yt(t),o=r||n||a||i,s=o?Se(t.length,String):[],u=s.length;for(var p in t)(e||fr.call(t,p))&&!(o&&(p=="length"||a&&(p=="offset"||p=="parent")||i&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||dt(p,u)))&&s.push(p);return s}function pr(t,e){return function(r){return t(e(r))}}function hr(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var gr=Object.prototype,br=gr.hasOwnProperty;function vr(t){if(!m(t))return hr(t);var e=ht(t),r=[];for(var n in t)n=="constructor"&&(e||!br.call(t,n))||r.push(n);return r}function _t(t){return X(t)?dr(t,!0):vr(t)}var A=K(Object,"create");function mr(){this.__data__=A?A(null):{},this.size=0}function yr(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var _r="__lodash_hash_undefined__",Tr=Object.prototype,wr=Tr.hasOwnProperty;function Or(t){var e=this.__data__;if(A){var r=e[t];return r===_r?void 0:r}return wr.call(e,t)?e[t]:void 0}var jr=Object.prototype,Ar=jr.hasOwnProperty;function xr(t){var e=this.__data__;return A?e[t]!==void 0:Ar.call(e,t)}var Pr="__lodash_hash_undefined__";function $r(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=A&&e===void 0?Pr:e,this}function v(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}v.prototype.clear=mr;v.prototype.delete=yr;v.prototype.get=Or;v.prototype.has=xr;v.prototype.set=$r;function Sr(){this.__data__=[],this.size=0}function N(t,e){for(var r=t.length;r--;)if(M(t[r][0],e))return r;return-1}var Cr=Array.prototype,Er=Cr.splice;function Mr(t){var e=this.__data__,r=N(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Er.call(e,r,1),--this.size,!0}function Nr(t){var e=this.__data__,r=N(e,t);return r<0?void 0:e[r][1]}function Ir(t){return N(this.__data__,t)>-1}function Lr(t,e){var r=this.__data__,n=N(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function g(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}g.prototype.clear=Sr;g.prototype.delete=Mr;g.prototype.get=Nr;g.prototype.has=Ir;g.prototype.set=Lr;var Tt=K(y,"Map");function Dr(){this.size=0,this.__data__={hash:new v,map:new(Tt||g),string:new v}}function Fr(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function I(t,e){var r=t.__data__;return Fr(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Hr(t){var e=I(this,t).delete(t);return this.size-=e?1:0,e}function Rr(t){return I(this,t).get(t)}function Ur(t){return I(this,t).has(t)}function zr(t,e){var r=I(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function _(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_.prototype.clear=Dr;_.prototype.delete=Hr;_.prototype.get=Rr;_.prototype.has=Ur;_.prototype.set=zr;var wt=pr(Object.getPrototypeOf,Object),Br="[object Object]",Gr=Function.prototype,qr=Object.prototype,Ot=Gr.toString,Kr=qr.hasOwnProperty,Vr=Ot.call(Object);function Xr(t){if(!x(t)||E(t)!=Br)return!1;var e=wt(t);if(e===null)return!0;var r=Kr.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Ot.call(r)==Vr}function Jr(){this.__data__=new g,this.size=0}function Wr(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Yr(t){return this.__data__.get(t)}function Zr(t){return this.__data__.has(t)}var Qr=200;function kr(t,e){var r=this.__data__;if(r instanceof g){var n=r.__data__;if(!Tt||n.length<Qr-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new _(n)}return r.set(t,e),this.size=r.size,this}function T(t){var e=this.__data__=new g(t);this.size=e.size}T.prototype.clear=Jr;T.prototype.delete=Wr;T.prototype.get=Yr;T.prototype.has=Zr;T.prototype.set=kr;var jt=typeof f=="object"&&f&&!f.nodeType&&f,at=jt&&typeof d=="object"&&d&&!d.nodeType&&d,tn=at&&at.exports===jt,it=tn?y.Buffer:void 0,ot=it?it.allocUnsafe:void 0;function en(t,e){if(e)return t.slice();var r=t.length,n=ot?ot(r):new t.constructor(r);return t.copy(n),n}var st=y.Uint8Array;function rn(t){var e=new t.constructor(t.byteLength);return new st(e).set(new st(t)),e}function nn(t,e){var r=e?rn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function an(t){return typeof t.constructor=="function"&&!ht(t)?oe(wt(t)):{}}function on(t){return function(e,r,n){for(var a=-1,i=Object(e),o=n(e),s=o.length;s--;){var u=o[t?s:++a];if(r(i[u],u,i)===!1)break}return e}}var sn=on();function z(t,e,r){(r!==void 0&&!M(t[e],r)||r===void 0&&!(e in t))&&V(t,e,r)}function un(t){return x(t)&&X(t)}function B(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function cn(t){return we(t,_t(t))}function ln(t,e,r,n,a,i,o){var s=B(t,r),u=B(e,r),p=o.get(u);if(p){z(t,r,p);return}var l=i?i(s,u,r+"",t,e,o):void 0,w=l===void 0;if(w){var L=R(u),D=!L&&vt(u),J=!L&&!D&&yt(u);l=u,L||D||J?R(s)?l=s:un(s)?l=ue(s):D?(w=!1,l=en(u,!0)):J?(w=!1,l=nn(u,!0)):l=[]:Xr(u)||U(u)?(l=s,U(s)?l=cn(s):(!m(s)||q(s))&&(l=an(u))):w=!1}w&&(o.set(u,l),a(l,u,n,i,o),o.delete(u)),z(t,r,l)}function At(t,e,r,n,a){t!==e&&sn(e,function(i,o){if(a||(a=new T),m(i))ln(t,e,o,r,At,n,a);else{var s=n?n(B(t,o),i,o+"",t,e,a):void 0;s===void 0&&(s=i),z(t,o,s)}},_t)}var fn=Pe(function(t,e,r){At(t,e,r)});const h=fn,ut=()=>Nt("1234567890abcdefghijklmnopqrstuvwxyz",6)();function G(){let t=ut();for(;t.match(/^\d/);)t=ut();return`siul${t}`}function dn(t){const e=[];return t.childNodes.forEach(r=>{const n=xt(r);n&&e.push(n)}),Pt(e,0)}function pn(t){const e=t.tagName.toLowerCase(),r={id:G(),name:"div",settings:{tag:e},children:[]},n=[],a=["id","class","href","src"];if(Object.keys(t.attributes).forEach(i=>{const o=t.attributes[i].name;a.includes(o)?(o==="class"&&t.attributes[i].value.trim()!==""&&h(r.settings,{_cssClasses:t.attributes[i].value}),o==="id"&&t.id.trim()!==""&&h(r.settings,{_cssId:t.id}),o==="href"&&t.tagName.toLowerCase()==="a"&&h(r.settings,{link:{url:t.getAttribute("href")}})):n.push({id:G(),name:o,value:t.attributes[i].value})}),h(r.settings,{_attributes:n}),e==="svg")return r.name="svg",h(r.settings,{source:"code",code:t.outerHTML}),r.settings._attributes=[],r;if(e==="img"){let i=t.getAttribute("src");return r.name="image",h(r.settings,{image:{external:!0,url:i||"",full:i||"",filename:i.split("/").pop()||""},altText:t.getAttribute("alt")||""}),delete r.settings.tag,r}if(e.match(/h[1-6]/)&&(r.name="heading",h(r.settings,{text:t.innerText,tag:e})),e==="video"||e==="iframe"&&(t.getAttribute("src").includes("youtube.com")||t.getAttribute("src").includes("vimeo.com")))return r.name="video",h(r.settings,{source:"url",url:e==="video"?t.getAttribute("src"):t.getAttribute("src").split("?")[0]}),delete r.settings.tag,r;if(e==="a"){if(h(r.settings,{link:{type:"external",url:t.getAttribute("href")||"",newTab:t.getAttribute("target")==="_blank",ariaLabel:t.getAttribute("aria-label")||"",title:t.getAttribute("title")||"",rel:t.getAttribute("rel")||""}}),t.children.length===0)return r.name="text-basic",h(r.settings,{text:t.innerText}),r;h(r.settings,{text:t.innerText})}return t.childNodes.forEach(i=>{const o=xt(i);o&&r.children.push(o)}),r}function xt(t){return t.nodeType===Node.ELEMENT_NODE?pn(t):t.nodeType===Node.TEXT_NODE&&t.nodeValue.trim()!==""?{id:G(),name:"text-basic",settings:{tag:"span",text:t.nodeValue},children:[]}:null}function Pt(t,e){const r=[];return t.forEach(n=>{n.parent=e,n._children=n.children.map(a=>a.id),r.push(n),r.push(...Pt(n.children,n.id)),n.children=n._children,delete n._children}),r}async function hn(){if(!navigator.permissions)return b("Clipboard permissions not supported",{module:"html2bricks",type:"error"}),!1;let t="";const e=await navigator.permissions.query({name:"clipboard-read",allowWithoutGesture:!1});if(e.state==="prompt"&&(b("Requesting clipboard-read permission",{module:"html2bricks"}),t=await navigator.clipboard.readText(),e.state!=="granted"))return b("Clipboard-read permission denied",{module:"html2bricks",type:"error"}),!1;t=await navigator.clipboard.readText();const r=await navigator.permissions.query({name:"clipboard-write"});return r.state==="prompt"&&(b("Requesting clipboard-write permission",{module:"html2bricks"}),await navigator.clipboard.writeText(t),r.state!=="granted")?(b("Clipboard-write permission denied",{module:"html2bricks",type:"error"}),!1):!0}async function $t(){if(!await hn()){$.$_showMessage("[Bricksbender] Clipboard access not available");return}const t=(await navigator.clipboard.readText()).trim();if(!t||t.charAt(0)!=="<"){b("Pasted content is not HTML",{module:"html2bricks",type:"error"}),$.$_showMessage("[Bricksbender] Pasted content is not HTML");return}const e=new DOMParser().parseFromString(t,"text/html").body,n={content:dn(e),source:"bricksCopiedElements",sourceUrl:window.bricksData.siteUrl,version:window.bricksData.version,globalClasses:[],globalElements:[]};await navigator.clipboard.writeText(JSON.stringify(n,null)),$.$_pasteElements(),$.$_showMessage("[Bricksbender] HTML pasted"),await navigator.clipboard.writeText(t)}document.addEventListener("keydown",t=>{t.target.id==="bricks-toolbar"||t.target.id==="bricks-panel"||!(t.ctrlKey||t.metaKey)||!t.shiftKey||t.key.toLowerCase()!=="v"||$t()});const St=document.querySelector("#bricks-builder-context-menu li:nth-child(2)"),P=document.createElement("li");P.id="bricksbender-html2bricks-context-menu";P.classList.add("sep");P.innerHTML='<span class="label">Paste HTML</span><span class="shortcut">CTRL + SHIFT + V</span>';P.addEventListener("click",$t);St.classList.remove("sep");St.insertAdjacentElement("afterend",P);b("Module loaded!",{module:"html2bricks"})});export default gn();
